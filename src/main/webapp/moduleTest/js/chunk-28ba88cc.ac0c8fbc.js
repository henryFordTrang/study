(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28ba88cc"],{"338c":function(e,t,s){},"4c11":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"board"},[i("ul",{staticClass:"board__ul"},e._l(e.receiveInfo,(function(t,n){return i("li",{key:n,class:t.id!=e.user?"board__li":"board__limi"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.id!=e.user,expression:"item.id != user"}],staticClass:"board__li__icon",attrs:{src:s("c121"),alt:""}}),t.pic?e._e():i("div",{class:t.id!=e.user?"board__li__message":"board__limi__messagemi"},[e._v(" "+e._s(t.message)+" ")]),t.pic?i("img",{class:t.id!=e.user?"board__li__messageImg":"board__limi__messagemiImg",attrs:{src:t.message,alt:""}}):e._e(),i("img",{directives:[{name:"show",rawName:"v-show",value:t.id==e.user,expression:"item.id == user"}],staticClass:"board__limi__iconmi",attrs:{src:s("c121"),alt:""}})])})),0)]),i("van-field",{staticClass:"chart__border",attrs:{placeholder:"请输入用户名"},model:{value:e.chat,callback:function(t){e.chat=t},expression:"chat"}},[i("van-button",{directives:[{name:"show",rawName:"v-show",value:e.chat.length>0,expression:"chat.length > 0"}],attrs:{slot:"button",type:"primary",size:"small"},on:{click:e.publish},slot:"button"},[e._v("publish")]),i("van-uploader",{directives:[{name:"show",rawName:"v-show",value:0==e.chat.length,expression:"chat.length == 0"}],attrs:{slot:"button","after-read":e.afterRead,"preview-image":!1},slot:"button",model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},[i("van-icon",{attrs:{name:"add-o",size:"27px"}})],1)],1)],1)},n=[],o=(s("b0c0"),s("2f62")),c={computed:Object(o["b"])({location:"generator/location"}),data:function(){return{address:"",client:"",chat:"",user:"",receiveInfo:[],usersList:[],fileList:[],ifpic:!1}},methods:{websocketCheck:function(){var e=this;"WebSocket"in window?(console.log("您的浏览器支持 WebSocket!"),e.client&&e.client.close(),e.user=1e4*Math.random(),e.user=Math.round(e.user),e.client=new WebSocket("ws://"+window.location.host+"/study/websocket/czd/"+e.user),e.client.onopen=function(){console.log("websocket连接上了...")},e.client.onmessage=function(t){var s=JSON.parse(t.data),i=Object.assign({message:s.message,id:s.id,pic:e.ifpic});e.receiveInfo.push(i)},e.client.onclose=function(){console.log("连接已关闭...")}):alert("您的浏览器不支持 WebSocket!")},reconnect:function(){var e=this;"WebSocket"in window?(console.log("您的浏览器支持 WebSocket!"),e.user=1e4*Math.random(),e.user=Math.round(e.user),e.client=new WebSocket("ws://"+window.location.host+"/study/websocket/czd/"+e.user),e.client.onopen=function(){console.log("连接websocket...")},e.client.onmessage=function(t){var s=JSON.parse(t.data),i=Object.assign({message:s.message,id:s.id});e.receiveInfo.push(i)},e.client.onclose=function(){console.log("连接已关闭...")}):alert("您的浏览器不支持 WebSocket!")},publish:function(){var e=this;console.log("数据发送中..."),e.ifpic=!1,e.client.send(e.chat),e.chat=""},afterRead:function(e){var t=this;console.log(e.content,e);var s="/study/ftp/upload",i=Object.assign({strbase64:e.content,filename:e.file.name});request.post(s,i).then((function(e){console.log(e),t.ifpic=!0,t.client.send(e)}))},closeWs:function(){var e=this;e.client.close()},onClickLeft:function(){var e=this;e.client.close(),window.$utils.exit()},onClickRight:function(){var e=this;e.client.close(),e.$toast(99)}},mounted:function(){var e=this;e.websocketCheck(),document.addEventListener("keyup",(function(t){"Enter"==t.key&&e.publish()}))}},a=c,l=(s("db96"),s("2877")),r=Object(l["a"])(a,i,n,!1,null,"2543981b",null);t["default"]=r.exports},c121:function(e,t,s){e.exports=s.p+"img/user.91d28fda.png"},db96:function(e,t,s){"use strict";var i=s("338c"),n=s.n(i);n.a}}]);